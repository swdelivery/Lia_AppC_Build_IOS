import groovy.json.JsonSlurper
apply from: './helper.gradle'

ext {
    def config = getCurrentBuildConfig()
    println "[setupVersions] ${config} "
    def defaultVersion = [
        version : "0.1",
        build   : 1,
    ]
    def appVersions = new JsonSlurper().parseText(new File("$rootDir/../app.json").text)
    if (config.flavour == 'staging') {
        println "Reading version from app.staging.json"
        appVersions = new JsonSlurper().parseText(new File("$rootDir/../app.staging.json").text)
    }
    def platformVersion = defaultVersion
    if (platformVersion && appVersions.android) {
        platformVersion = appVersions.android
    }
    versionCode = platformVersion.build
    versionName = platformVersion.version
    println "[setupVersions] version: ${versionName} - build: ${versionCode}"
}
